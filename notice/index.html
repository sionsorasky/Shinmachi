<!doctype html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>お知らせ一覧 - 新町急行鉄道</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Noto Sans JP', sans-serif; }
.news-card { transition: .2s; border-left: 4px solid transparent; }
.news-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(0,0,0,.1);
  border-left-color: #2563eb;
}
.filter-btn.active {
  background:#2563eb; color:#fff;
}
</style>
</head>

<body class="bg-gray-50">

<main class="max-w-5xl mx-auto p-6">

<!-- 検索 -->
<div class="bg-white p-6 rounded shadow mb-6">
  <div class="flex gap-3">
    <input id="search-input" type="text" placeholder="お知らせを検索"
      class="flex-1 border px-4 py-2 rounded">
    <button id="search-btn"
      class="bg-blue-600 text-white px-6 py-2 rounded">検索</button>
  </div>

  <!-- フィルター -->
  <div class="flex gap-2 mt-4">
    <button class="filter-btn active px-4 py-2 border rounded">すべて</button>
    <button class="filter-btn px-4 py-2 border rounded">重要</button>
    <button class="filter-btn px-4 py-2 border rounded">運行</button>
    <button class="filter-btn px-4 py-2 border rounded">イベント</button>
    <button class="filter-btn px-4 py-2 border rounded">その他</button>
  </div>
</div>

<!-- お知らせ一覧 -->
<div id="news-list" class="space-y-4">

<a class="news-card block bg-white p-6 rounded shadow"
   data-category="重要">
  <span class="text-sm text-gray-500">2024.01.15</span>
  <h3 class="font-bold text-lg">ダイヤ改正のお知らせ</h3>
  <p class="text-sm text-gray-600">3月16日より全線でダイヤ改正を行います。</p>
</a>

<a class="news-card block bg-white p-6 rounded shadow"
   data-category="運行">
  <span class="text-sm text-gray-500">2024.01.10</span>
  <h3 class="font-bold text-lg">年末年始の運行について</h3>
  <p class="text-sm text-gray-600">特別ダイヤで運行します。</p>
</a>

<a class="news-card block bg-white p-6 rounded shadow"
   data-category="イベント">
  <span class="text-sm text-gray-500">2024.01.05</span>
  <h3 class="font-bold text-lg">開業50周年記念イベント</h3>
  <p class="text-sm text-gray-600">特別展示と記念グッズを販売します。</p>
</a>

<a class="news-card block bg-white p-6 rounded shadow"
   data-category="その他">
  <span class="text-sm text-gray-500">2024.01.03</span>
  <h3 class="font-bold text-lg">ICカード新サービス</h3>
  <p class="text-sm text-gray-600">ポイント付与が始まります。</p>
</a>

</div>

<!-- ページネーション -->
<div id="pagination" class="flex justify-center gap-2 mt-8"></div>

</main>

<script>
/* ===== 設定 ===== */
const PER_PAGE = 2;

/* ===== 状態 ===== */
let page = 1;
let keyword = "";
let category = "すべて";

/* ===== 要素 ===== */
const newsList = document.getElementById("news-list");
const pagination = document.getElementById("pagination");
const searchInput = document.getElementById("search-input");
const searchBtn = document.getElementById("search-btn");
const filterBtns = document.querySelectorAll(".filter-btn");

/* ===== データ ===== */
const news = [...newsList.children].map(el => ({
  el,
  title: el.querySelector("h3").innerText,
  text: el.querySelector("p").innerText,
  category: el.dataset.category
}));

/* ===== フィルタ ===== */
function filtered() {
  return news.filter(n =>
    (category === "すべて" || n.category === category) &&
    (n.title.includes(keyword) || n.text.includes(keyword))
  );
}

/* ===== 描画 ===== */
function render() {
  newsList.innerHTML = "";
  const items = filtered();
  const pages = Math.ceil(items.length / PER_PAGE);
  const start = (page - 1) * PER_PAGE;

  items.slice(start, start + PER_PAGE)
       .forEach(n => newsList.appendChild(n.el));

  pagination.innerHTML = "";
  for (let i = 1; i <= pages; i++) {
    const b = document.createElement("button");
    b.textContent = i;
    b.className = i === page
      ? "px-4 py-2 bg-blue-600 text-white rounded"
      : "px-4 py-2 border rounded";
    b.onclick = () => { page = i; render(); };
    pagination.appendChild(b);
  }
}

/* ===== イベント ===== */
searchBtn.onclick = () => {
  keyword = searchInput.value.trim();
  page = 1;
  render();
};

filterBtns.forEach(btn => {
  btn.onclick = () => {
    filterBtns.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    category = btn.innerText;
    page = 1;
    render();
  };
});

/* 初期表示 */
render();
</script>

</body>
</html>